/*! For license information please see talk-src_views_RoomSelector_vue.js.LICENSE.txt */
"use strict";(self.webpackChunktalk=self.webpackChunktalk||[]).push([["src_views_RoomSelector_vue"],{81415:(n,t,e)=>{e.d(t,{Z:()=>r});var o=e(75925),i=e.n(o),a=e(94746),s=e(97167),l=e(58061);const r={name:"ConversationIcon",components:{NcAvatar:i(),Star:a.default,VideoIcon:s.Z},props:{hideFavorite:{type:Boolean,default:!0},hideCall:{type:Boolean,default:!0},disableMenu:{type:Boolean,default:!1},item:{type:Object,default:function(){return{objectType:"",type:0,displayName:"",isFavorite:!1}}},offline:{type:Boolean,default:!1}},computed:{showCall:function(){return!this.hideCall&&this.item.hasCall},showFavorite:function(){return!this.hideFavorite&&this.item.isFavorite},iconClass:function(){return"file"===this.item.objectType?"icon-file":"share:password"===this.item.objectType?"icon-password":"emails"===this.item.objectType?"icon-mail":this.item.type===l.Sl.TYPE.CHANGELOG?"icon-changelog":this.item.type===l.Sl.TYPE.GROUP?"icon-contacts":this.item.type===l.Sl.TYPE.PUBLIC?"icon-public":""},preloadedUserStatus:function(){if(Object.prototype.hasOwnProperty.call(this.item,"statusMessage"))return{status:this.item.status||null,message:this.item.statusMessage||null,icon:this.item.statusIcon||null}},menuContainer:function(){if(this.$store)return this.$store.getters.getMainContainerSelector()}}}},96639:(n,e,o)=>{o.d(e,{Z:()=>p});var i=o(70110),a=o.n(i),s=o(26937),l=o(79753),r=o(58061),c=o(41673),A=o(10861),d=o.n(A),C=o(10204),u=o.n(C),v=o(41309);const p={name:"RoomSelector",components:{ConversationIcon:c.Z,NcModal:a(),NcButton:d(),NcTextField:u(),Magnify:v.Z},props:{container:{type:String,default:void 0},dialogTitle:{type:String,default:t("spreed","Link to a conversation")},dialogSubtitle:{type:String,default:""},showPostableOnly:{type:Boolean,default:!1}},data:function(){return{rooms:[],selectedRoom:null,currentRoom:null,searchText:"",loading:!0}},computed:{availableRooms:function(){var n=this,t=this.rooms.filter((function(t){return!(t.type===r.Sl.TYPE.CHANGELOG||n.currentRoom&&n.currentRoom===t.token||n.showPostableOnly&&t.readOnly!==r.Sl.STATE.READ_WRITE||"file"===t.objectType||"share:password"===t.objectType)}));return this.searchText?t.filter((function(t){return t.displayName.toLowerCase().includes(n.searchText.toLowerCase())})):t}},beforeMount:function(){var n,t;this.fetchRooms();var e=null===(n=OCA.Talk)||void 0===n||null===(t=n.instance)||void 0===t?void 0:t.$store;e&&(this.currentRoom=e.getters.getToken())},methods:{fetchRooms:function(){var n=this;s.Z.get((0,l.generateOcsUrl)("/apps/spreed/api/v4/room")).then((function(t){n.rooms=t.data.ocs.data.sort(n.sortConversations),n.loading=!1}))},sortConversations:function(n,t){return n.isFavorite!==t.isFavorite?n.isFavorite?-1:1:t.lastActivity-n.lastActivity},clearText:function(){this.searchText=""},close:function(){this.$root.$emit("close"),this.$emit("close")},select:function(){this.$root.$emit("select",this.selectedRoom),this.$emit("select",this.selectedRoom)}}}},58061:(n,t,e)=>{e.d(t,{Sl:()=>o});var o={START_CALL:{EVERYONE:0,USERS:1,MODERATORS:2},STATE:{READ_WRITE:0,READ_ONLY:1},LISTABLE:{NONE:0,USERS:1,ALL:2},TYPE:{ONE_TO_ONE:1,GROUP:2,PUBLIC:3,CHANGELOG:4}}},85428:(n,t,e)=>{e.d(t,{Z:()=>l});var o=e(87537),i=e.n(o),a=e(23645),s=e.n(a)()(i());s.push([n.id,".conversation-icon[data-v-5cf883cc]{width:44px;height:44px;position:relative}.conversation-icon .avatar.icon[data-v-5cf883cc]{width:44px;height:44px;line-height:44px;font-size:22px;background-color:var(--color-background-darker)}.conversation-icon .avatar.icon.icon-changelog[data-v-5cf883cc]{background-size:44px}.conversation-icon .avatar.icon.icon-public[data-v-5cf883cc],.conversation-icon .avatar.icon.icon-contacts[data-v-5cf883cc],.conversation-icon .avatar.icon.icon-password[data-v-5cf883cc],.conversation-icon .avatar.icon.icon-file[data-v-5cf883cc],.conversation-icon .avatar.icon.icon-mail[data-v-5cf883cc]{background-size:22px}.conversation-icon .overlap-icon[data-v-5cf883cc]{position:absolute;top:0;left:calc(44px - 12px);line-height:100%;display:inline-block;vertical-align:middle}.offline[data-v-5cf883cc]{opacity:.4}","",{version:3,sources:["webpack://./src/components/ConversationIcon.vue"],names:[],mappings:"AAyJA,oCACC,UAHW,CAIX,WAJW,CAKX,iBAAA,CAEA,iDACC,UARU,CASV,WATU,CAUV,gBAVU,CAWV,cAAA,CACA,+CAAA,CAEA,gEACC,oBAfS,CAkBV,iTAKC,oBAAA,CAIF,kDACC,iBAAA,CACA,KAAA,CACA,sBAAA,CACA,gBAAA,CACA,oBAAA,CACA,qBAAA,CAIF,0BACC,UAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n$icon-size: 44px;\n\n.conversation-icon {\n\twidth: $icon-size;\n\theight: $icon-size;\n\tposition: relative;\n\n\t.avatar.icon {\n\t\twidth: $icon-size;\n\t\theight: $icon-size;\n\t\tline-height: $icon-size;\n\t\tfont-size: calc($icon-size / 2);\n\t\tbackground-color: var(--color-background-darker);\n\n\t\t&.icon-changelog {\n\t\t\tbackground-size: $icon-size;\n\t\t}\n\n\t\t&.icon-public,\n\t\t&.icon-contacts,\n\t\t&.icon-password,\n\t\t&.icon-file,\n\t\t&.icon-mail {\n\t\t\tbackground-size: calc($icon-size / 2);\n\t\t}\n\t}\n\n\t.overlap-icon {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: calc(#{$icon-size} - 12px);\n\t\tline-height: 100%;\n\t\tdisplay: inline-block;\n\t\tvertical-align: middle;\n\t}\n}\n\n.offline {\n\topacity: .4;\n}\n\n"],sourceRoot:""}]);const l=s},28107:(n,t,e)=>{e.d(t,{Z:()=>l});var o=e(87537),i=e.n(o),a=e(23645),s=e.n(a)()(i());s.push([n.id,"[data-v-590e44de] .modal-container{height:700px}.talk-modal[data-v-590e44de]{height:80vh}#modal-inner[data-v-590e44de]{width:100%;padding:16px;margin:0 auto;position:relative;display:flex;align-items:center;justify-content:center;height:100%;box-sizing:border-box}#modal-inner h2[data-v-590e44de]{margin-bottom:4px}#modal-content[data-v-590e44de]{position:absolute;width:calc(100% - 40px);height:calc(100% - 40px);display:flex;flex-direction:column}#room-list[data-v-590e44de]{overflow-y:auto;flex:0 1 auto;height:100%}li[data-v-590e44de]{padding:6px;border:1px solid rgba(0,0,0,0);display:flex}li[data-v-590e44de]:hover,li[data-v-590e44de]:focus{background-color:var(--color-background-dark);border-radius:var(--border-radius-pill)}li.selected[data-v-590e44de]{background-color:var(--color-primary-light);border-radius:var(--border-radius-pill)}li>span[data-v-590e44de]{padding:5px 5px 5px 10px;vertical-align:middle;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}#modal-buttons[data-v-590e44de]{overflow:hidden;flex-shrink:0;margin-left:auto}.subtitle[data-v-590e44de]{color:var(--color-text-maxcontrast);margin-bottom:8px}.search-form[data-v-590e44de]{margin-bottom:10px}","",{version:3,sources:["webpack://./src/views/RoomSelector.vue"],names:[],mappings:"AAoLA,mCACC,YAAA,CAGD,6BACC,WAAA,CAGD,8BACC,UAAA,CACA,YAAA,CACA,aAAA,CACA,iBAAA,CACA,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,WAAA,CACA,qBAAA,CACA,iCACC,iBAAA,CAIF,gCACC,iBAAA,CACA,uBAAA,CACA,wBAAA,CACA,YAAA,CACA,qBAAA,CAGD,4BACC,eAAA,CACA,aAAA,CACA,WAAA,CAGD,oBACC,WAAA,CACA,8BAAA,CACA,YAAA,CAEA,oDAEC,6CAAA,CACA,uCAAA,CAGD,6BACC,2CAAA,CACA,uCAAA,CAGD,yBACC,wBAAA,CACA,qBAAA,CACA,sBAAA,CACA,kBAAA,CACA,eAAA,CAIF,gCACC,eAAA,CACA,aAAA,CACA,gBAAA,CAGD,2BACC,mCAAA,CACA,iBAAA,CAGD,8BACC,kBAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n::v-deep .modal-container {\n\theight: 700px;\n}\n\n.talk-modal {\n\theight: 80vh;\n}\n\n#modal-inner {\n\twidth: 100%;\n\tpadding: 16px;\n\tmargin: 0 auto;\n\tposition: relative;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\theight: 100%;\n\tbox-sizing: border-box;\n\th2 {\n\t\tmargin-bottom: 4px;\n\t}\n}\n\n#modal-content {\n\tposition: absolute;\n\twidth: calc(100% - 40px);\n\theight: calc(100% - 40px);\n\tdisplay: flex;\n\tflex-direction: column;\n}\n\n#room-list {\n\toverflow-y: auto;\n\tflex: 0 1 auto;\n\theight: 100%;\n}\n\nli {\n\tpadding: 6px;\n\tborder: 1px solid transparent;\n\tdisplay: flex;\n\n\t&:hover,\n\t&:focus {\n\t\tbackground-color: var(--color-background-dark);\n\t\tborder-radius: var(--border-radius-pill);\n\t}\n\n\t&.selected {\n\t\tbackground-color: var(--color-primary-light);\n\t\tborder-radius: var(--border-radius-pill);\n\t}\n\n\t& > span {\n\t\tpadding: 5px 5px 5px 10px;\n\t\tvertical-align: middle;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t}\n}\n\n#modal-buttons {\n\toverflow: hidden;\n\tflex-shrink: 0;\n\tmargin-left: auto;\n}\n\n.subtitle {\n\tcolor: var(--color-text-maxcontrast);\n\tmargin-bottom: 8px;\n}\n\n.search-form {\n\tmargin-bottom: 10px;\n}\n"],sourceRoot:""}]);const l=s},96570:(n,t,e)=>{var o=e(93379),i=e.n(o),a=e(7795),s=e.n(a),l=e(90569),r=e.n(l),c=e(3565),A=e.n(c),d=e(19216),C=e.n(d),u=e(44589),v=e.n(u),p=e(85428),h={};h.styleTagTransform=v(),h.setAttributes=A(),h.insert=r().bind(null,"head"),h.domAPI=s(),h.insertStyleElement=C();i()(p.Z,h),p.Z&&p.Z.locals&&p.Z.locals},66682:(n,t,e)=>{var o=e(93379),i=e.n(o),a=e(7795),s=e.n(a),l=e(90569),r=e.n(l),c=e(3565),A=e.n(c),d=e(19216),C=e.n(d),u=e(44589),v=e.n(u),p=e(28107),h={};h.styleTagTransform=v(),h.setAttributes=A(),h.insert=r().bind(null,"head"),h.domAPI=s(),h.insertStyleElement=C();i()(p.Z,h),p.Z&&p.Z.locals&&p.Z.locals},41673:(n,t,e)=>{e.d(t,{Z:()=>a});var o=e(62252),i=e(56429);e(4964);const a=(0,e(51900).Z)(i.Z,o.s,o.x,!1,null,"5cf883cc",null).exports},35504:(n,t,e)=>{e.r(t),e.d(t,{default:()=>a});var o=e(36318),i=e(71082);e(14726);const a=(0,e(51900).Z)(i.Z,o.s,o.x,!1,null,"590e44de",null).exports},56429:(n,t,e)=>{e.d(t,{Z:()=>o});const o=e(81415).Z},71082:(n,t,e)=>{e.d(t,{Z:()=>o});const o=e(96639).Z},4964:(n,t,e)=>{e(96570)},14726:(n,t,e)=>{e(66682)},62252:(n,t,e)=>{e.d(t,{s:()=>o,x:()=>i});var o=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"conversation-icon",class:{offline:n.offline}},[n.iconClass?e("div",{staticClass:"avatar icon",class:n.iconClass}):e("NcAvatar",{staticClass:"conversation-icon__avatar",attrs:{size:44,user:n.item.name,"disable-menu":n.disableMenu,"display-name":n.item.displayName,"preloaded-user-status":n.preloadedUserStatus,"show-user-status-compact":n.disableMenu,"menu-container":n.menuContainer,"menu-position":"left"}}),n._v(" "),n.showCall?e("div",{staticClass:"overlap-icon"},[e("VideoIcon",{attrs:{size:20,"fill-color":"#E9322D"}}),n._v(" "),e("span",{staticClass:"hidden-visually"},[n._v(n._s(n.t("spreed","Call in progress")))])],1):n.showFavorite?e("div",{staticClass:"overlap-icon"},[e("Star",{attrs:{size:20,"fill-color":"#FFCC00"}}),n._v(" "),e("span",{staticClass:"hidden-visually"},[n._v(n._s(n.t("spreed","Favorite")))])],1):n._e()],1)},i=[]},36318:(n,t,e)=>{e.d(t,{s:()=>o,x:()=>i});var o=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("NcModal",{attrs:{size:"normal",container:n.container},on:{close:n.close}},[e("div",{staticClass:"talk-modal",class:{"icon-loading":n.loading},attrs:{id:"modal-inner"}},[e("div",{attrs:{id:"modal-content"}},[e("h2",[n._v("\n\t\t\t\t"+n._s(n.dialogTitle)+"\n\t\t\t")]),n._v(" "),n.dialogSubtitle?e("p",{staticClass:"subtitle"},[n._v("\n\t\t\t\t"+n._s(n.dialogSubtitle)+"\n\t\t\t")]):n._e(),n._v(" "),e("NcTextField",{staticClass:"search-form",attrs:{value:n.searchText,"trailing-button-icon":"close","show-trailing-button":""!==n.searchText},on:{"update:value":function(t){n.searchText=t},"trailing-button-click":n.clearText}},[e("Magnify",{attrs:{size:16}})],1),n._v(" "),e("div",{attrs:{id:"room-list"}},[!n.loading&&n.availableRooms.length>0?e("ul",n._l(n.availableRooms,(function(t){return e("li",{key:t.token,class:{selected:n.selectedRoom===t.token},on:{click:function(e){n.selectedRoom=t.token}}},[e("ConversationIcon",{attrs:{item:t,"hide-call":!0,"hide-favorite":!1,"disable-menu":!0}}),n._v(" "),e("span",[n._v(n._s(t.displayName))])],1)})),0):n.loading?n._e():e("div",[n._v("\n\t\t\t\t\t"+n._s(n.t("spreed","No conversations found"))+"\n\t\t\t\t")])]),n._v(" "),e("div",{attrs:{id:"modal-buttons"}},[!n.loading&&n.availableRooms.length>0?e("NcButton",{attrs:{type:"primary",disabled:!n.selectedRoom},on:{click:n.select}},[n._v("\n\t\t\t\t\t"+n._s(n.t("spreed","Select conversation"))+"\n\t\t\t\t")]):n._e()],1)],1)])])},i=[]}}]);
//# sourceMappingURL=talk-src_views_RoomSelector_vue.js.map?v=1a8f71b27d47a8188408